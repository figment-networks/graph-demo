"use strict";
// This test is used by jsRunner_test.go
exports.__esModule = true;
var graph_1 = require("../../graph");
/***
 * Generated
 * Entity definitions here would be auto-generated by `graph codegen`
 */
var TransactionEntity = /** @class */ (function () {
    function TransactionEntity() {
    }
    TransactionEntity.prototype.save = function () {
        return graph_1.store.save("Transaction", this);
    };
    return TransactionEntity;
}());
var BlockEntity = /** @class */ (function () {
    function BlockEntity(height, id, time, myNote) {
        this.id = id;
        this.height = height;
        this.time = time;
        this.myNote = myNote;
    }
    BlockEntity.prototype.save = function () {
        return graph_1.store.save("Block", this);
    };
    return BlockEntity;
}());
/**
 * Mapping
 */
var GET_BLOCK = "query GetBlock($height: Int) {\n    block( $height: Int = 0 ) {\n      height\n      time\n      id\n    }\n  }";
function handleBlock(newBlockEvent) {
    var _a = graph_1.graphql.call(newBlockEvent.network, GET_BLOCK, { height: newBlockEvent.height }, "0.0.1"), data = _a.data, error = _a.error;
    if (error) {
        graph_1.log.debug(JSON.stringify(error));
        return;
    }
    graph_1.log.debug('data from query: ' + JSON.stringify(data));
    var height = data.height, id = data.id, time = data.time;
    var entity = new BlockEntity(height, id, time, "ok");
    graph_1.log.debug('saving: ' + JSON.stringify(entity));
    entity.save();
}
